{"loaded":true,"name":"IDE","openedFile":"project.js","files":{"index.html":["<!doctype html>","<html>","  <head>","    <title>IDE</title>","    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">","    <meta charset=\"UTF-8\">","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">","    <style file=\"design.css\"></style>","  </head>","  <body file=\"body.html\"></body>","</html>"],"design.css":["* {","  box-sizing: border-box;","  transition: all .6s;","}","body {","  background: #2e2e2e;","  color: white;","  margin: 0;","}","h1 {","  text-align: center;","  padding: 5px;","  margin: 0;","}",".button {","  display: inline-block;","  margin: 3px;","  padding: 3px;","  cursor: pointer;","  border-radius: 5px;","  box-shadow: 0 0 4px black;","  background-color: black;","  color: white;","}",".button:hover {","  background-color: white;","  color: black;","}",".line {","  counter-increment: line;","  white-space: pre;","  outline: none;","}",".line::before {","  display: inline-block;","  content: counter(line) \": \";","  width: 30px;","  background-color: black;","  text-align: right;","  margin-right: 3px;","}",".line:focus {","  background-color: #6e6e6e;","}","#toolbar {","  background-color: #1a1a1a;","  display: flex;","}","#code, #file-picker, #console {","  position: fixed;","  left: 0;","  right: 0;","  bottom: 0;","}","#code {","  height: calc(100% - 30px);","  font-family: monospace;","}","#console, #file-picker {","  height: 0;","  background-color: #171717;","}","#unread {","  background-color: red;","  border-radius: 50%;","  padding: 2px;","  display: none;","  text-shadow: 0 0 3px black;","  position: absolute;","  font-size: x-small","}","#project-name {","  font-size: large;","  padding: 5px;","}"],"start.js":["addEventListener('error', e => {if (opener) opener.postMessage({lineno: e.lineno, colno: e.colno, message: e.message}, '*')})","addEventListener('load', load)","","function load() {","  ","}"],"body.html":["<div id=\"toolbar\">","<div class=\"button\" id=\"save-project\" style=\"display: none;\" onclick=\"gimme.saveProject()\">Save Project</div>","  <div class=\"button\" id=\"export-project\" style=\"display: none;\" onclick=\"gimme.exportProject()\">Export Project</div>","  <input type=\"file\" id=\"file\" hidden onchange=\"gimme.startFileReader(this)\" accept=\".proj\">","  <div class=\"button\" onclick=\"if (gimme.verifyActive()) gimme.newProject()\">New Project</div>","  <div class=\"button\" onclick=\"gimme.showConsole()\">Console <span id=\"unread\"></span></div>","  <div id=\"file-tools\" style=\"display: none;\">","    <div class=\"button\" onclick=\"gimme.newProjectFile()\">New File</div>","    <div class=\"button\" onclick=\"gimme.openProjectFilePane()\">Open File</div>","      <div id=\"file-tools\" style=\"display: none;\">","  <div class=\"button\" onclick=\"gimme.newProjectFile()\">New File</div>","  <div class=\"button\" onclick=\"gimme.openProjectFilePane()\">Open File</div>","  </div>","   <div style=\"flex-grow: 1;\"></div>","   <div id=\"project-name\" oninput=\"if (this.innerText) project.name = this.innerText\"></div>","</div>","<div id=\"code\" spellcheck=false></div>","<div id=\"file-picker\"></div>","<div id=\"console\"><h1>Console <div class=\"button\" onclick=\"gimme.closeConsole()\">Close</div></h1></div>","<div id=\"code\" spellcheck=false></div>","<div id=\"file-picker\"></div>","<script file=\"project.js\"></script>","<script file=\"globals.js\"></script>"],"globals.js":["","window.gimme = {verifyActive}","addEventListener('error', errorHandler)","addEventListener('message', e => {errorHandler(e.data)})","  addEventListener('message', e => {errorHandler(e.data)})","window.onkeydown = ev => {","if (/^s$/i.test(ev.key) && ev.ctrlKey) {","  ev.preventDefault()","    if (!project.loaded) return false","    saveProject()","  } else if (/^o$/i.test(ev.key) && ev.ctrlKey) {","    ev.preventDefault()","    if (verifyActive()) document.querySelector('input[type=\"file\"]').click()","  } else if (/^n$/i.test(ev.key) && ev.ctrlKey) {","    ev.preventDefault()","    if (verifyActive()) newProject()","  }","}"," ","  window.gimme = {startFileReader, showConsole, closeConsole, verifyActive, newProject, saveProject, newProjectFile, openProjectFilePane, renameProjectFile, exportProject, preview}  ","function verifyActive() {","  return !project.loaded || confirm('Are you sure you want to close you current project?')","function errorHandler(ev) {","  let unread = document.getElementById('unread')","  unread.innerText = parseInt(unread.innerText || 0) + 1","  let text = ev.lineno + ':' + ev.colno + '; ' + ev.message","  unread.style.display = 'inline-block'","  document.getElementById('console').append(text, document.createElement('br'))","}","    document.getElementById('console').append(text, document.createElement('br'))","        }"],"project.js":["function saveProject() {","  let blob = new Blob([JSON.stringify(project)], {type: 'text/json'})","  let href = URL.createObjectURL(blob)","  let a = document.createElement('a')","  a.href = href","  a.download = project.name + '.proj'","  a.click()","}","","function exportProject() {","  let a = document.createElement('a')","  a.href = compile()","  a.download = project.name + '.html'","  a.click()","}","","function loadProject(p) {","  project = p","  let pn = document.getElementById('project-name')","  pn.innerText = p.name","  pn.contentEditable = true","  if (p.openedFile) openProjectFile(p.openedFile)","  document.getElementById('save-project').style.display = ''","  document.getElementById('export-project').style.display = ''","  document.getElementById('file-tools').style.display = ''","}","","function openProjectFile(fileName) {","  let code = document.getElementById('code')","  project.openedFile = fileName","  document.getElementById('current-file').innerHTML = fileName","  code.innerText = ''","  code.append(...project.files[fileName].map(addLine))","}","","function openProjectFilePane() {","  let fp = document.getElementById('file-picker')","  fp.style.height = 'calc(100% - 30px)'","  fp.innerHTML = '<h1>Files <div class=\"button\" onclick=\"this.parentElement.parentElement.style.height = \\'\\'\">Close</div></h1>'","  Object.keys(project.files).sort().forEach(file => {","    let div = document.createElement('div')","    div.innerText = file","    div.onclick = () => {openProjectFile(file); fp.style.height = '';}","    fp.append(div)","  })","}"]}}